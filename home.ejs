<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather</title>
    <!-- <link rel="stylesheet" href="style.css"> -->
    <style>
        *{
    margin:0;
    padding:0;
    box-sizing: border-box;
    border: none;
    outline: none;
    font-family: sans-serif;
}
body{
    min-height: 100vh;
    display:flex;
    justify-content:center;
    align-items: center;
    background-color: #CFD6C4;

}
.container{
    width: 400px;
    height:min-content;
    background-color: #fff;
    border-radius:12px;
    padding:28px;
}


.search-box{
    width:100%;
    height: min-content;
    display:flex;
    justify-content: space-between;
    align-items: center;

}
.search-box input{
    width:84%;
    font-size: 20px;
    text-transform: capitalize;
    color: #000;
    background-color: #e6f5fb;
    padding: 12px 16px;
    border-radius: 14px


}

.search-box input ::placeholder{
    color:#000;
}
.search-box button{
    width: 46px;
    height: 46px;
    background-color: #e6f5fb;
    border-radius:50%;
    cursor: pointer;
    font-size:20px

}

.search-box button:hover{
    color:#fff;
    background-color: #ababab;
}  
.weather-body{
    display:none;
    justify-content: center;
    align-items: center;
    flex-direction:column;
    margin-block: 20px;

}
.weather-body img{
    height: auto;
    width:60%;
}

.weather-box{
    margin-block:20px;
    text-align: center;
    font-weight: 800;
    font-size: 20px;
    position: relative;
}
.weather-box .temperature{
    font-size: 40px;
    font-weight: 800;
    position: relative;
} 
.weather-box .temperature sup{
    font-size: 20px;
    position: absolute;
    font-weight: 600;
}
.weather-box .description{
    font-size: 20px;
    font-weight: 700;
    text-transform: capitalize;
}

.weather-details{
    width: 100%;
    display:flex;
    justify-content: space-between;
    margin-top: 30px;
}
.humidity, .wind{
    
    display:flex;
    align-items: center;
}
.humidity{
    margin-left: 20px;
}
.wind{
    margin-right:20px;
}
.weather-details i{

font-size:36px;
}
.weather-details .text{
    margin-left: 10px; 
    font-size:16px;  
}
.text span{
    font-size:20px;
    font-weight:700;
    }
.location-not-found{
        margin-top: 20px;
        display: none;
        align-items: center;
        justify-content: center;
        flex-direction: column;
    }
    
.location-not-found h1{
        font-size: 20px;
        color: #6b6b6b;
        margin-block-end: 15px;
    }
.location-not-found img{
        width: 80%;
    }
    .icon-bar {
        width: 60px;
        background-color: #f6e0b5;
        position: fixed;
        left: 0; /* Set the icon bar to the extreme left */
        top: 50%; /* Adjust the vertical position as needed */
        transform: translateY(-50%);
      }
      
      .icon-bar a {
        display: block;
        text-align: center;
        padding: 16px;
        transition: all 0.3s ease;
        color: white;
        font-size: 36px;
      }
      
      .icon-bar a:hover {
        background-color: #000;
      }
      
      .active {
        background-color: #eea990;
      }

     /*changes*/
  
  
  
  
   .dropbtn {
  background-color: #e6f5fb;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
  cursor: pointer;
}

.dropbtn:hover, .dropbtn:focus {
  background-color: #e6f5fb;
}

#myInput {
  box-sizing: border-box;
  background-image: url('searchicon.png');
  background-position: 14px 12px;
  background-repeat: no-repeat;
  font-size: 16px;
  padding: 14px 20px 12px 45px;
  border: none;
  border-bottom: 1px solid #ddd;
}

#myInput:focus {outline: 3px solid #ddd;}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f6f6f6;
  min-width: 230px;
  overflow: auto;
  border: 1px solid #ddd;
  z-index: 1;
}

.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

.dropdown a:hover {background-color: #ddd;}

.show {display: block;}

#cityDropdown {
            display: none;
            position: absolute;
            width: 100%;
            background-color: #fff;
            border: 1px solid #ddd;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1;
        }

        #cityDropdown a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            cursor: pointer;
        }

        #cityDropdown a:hover {
            background-color: #f6f6f6;
        }     
    </style>
</head>
<body>
    <!-- <div class="container">
       

        <div class="search-box">
        
            <div class="dropdown-container">
                <input type="text" placeholder="Search for a city" id="cityInput" class="input-box">
                <div id="cityDropdown"></div>
            </div>
        </div> 
        </div>  -->
    <div class="icon-bar">
        <a class="active" href="/registration"><i class="fa fa-home"></i></a> 
        <a href="/login"><i class="fa fa-user"></i></a> 
        <a href="/contact"><i class="fa fa-envelope"></i></a> 
        <a href="/message"><i class="fa fa-bell"></i></a>
        <a href="#"><i class="fa fa-star"></i></a>
        <a href="/deletion"><i class="fa fa-trash"></i></a> 
      </div>
    <div class="container">
        <div class="header">
            <div class="search-box">
                <input type="text" placeholder="Enter your location" class="input-box">
                <div id="cityDropdown"></div>
                <button class="fa-solid fa-magnifying-glass" id="searchBtn"></button>
            </div>
        </div>

        <div class="location-not-found">
            <h1>Sorry, Location not found!!!</h1>
            <img src="/404.png" alt="404 Error">
        </div>

        <div class="weather-body">
            <img src="/cloud.png" alt="Weather Image" class="weather-img">

            <div class="weather-box">
                <p class="temperature">0 <sup>°C</sup></p>
                <p class="description">light rain</p>
            </div>

            <div class="weather-details">
                <div class="humidity">
                    <i class="fa-sharp fa-solid fa-droplet"></i>
                    <div class="text">
                        <span id="humidity">45%</span>
                        <p>Humidity</p>
                    </div>
                </div>

                <div class="wind">
                    <i class="fa-solid fa-wind"></i>
                    <div class="text">
                        <span id="wind-speed">12Km/H</span>
                        <p>Wind Speed</p>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script >
        const inputBox = document.querySelector('.input-box');
const searchBtn = document.getElementById('searchBtn');
const weather_img = document.querySelector('.weather-img');
const temperature = document.querySelector('.temperature');
const description = document.querySelector('.description');
const humidity = document.getElementById('humidity');
const wind_speed = document.getElementById('wind-speed');

const location_not_found = document.querySelector('.location-not-found');

const weather_body = document.querySelector('.weather-body');


async function checkWeather(city){
    const api_key = "23da651431d7b0f3ddf0b4fa13b310af";
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${api_key}`;

    const weather_data = await fetch(`${url}`).then(response => response.json());

    if(weather_data.cod === `404`){
        location_not_found.style.display = "flex";
        weather_body.style.display = "none";
        console.log("error");
        return;
    }
  

    console.log("run");
    location_not_found.style.display = "none";
    weather_body.style.display = "flex";
    temperature.innerHTML = `${Math.round(weather_data.main.temp - 273.15)}°C`;
    description.innerHTML = `${weather_data.weather[0].description}`;

    humidity.innerHTML = `${weather_data.main.humidity}%`;
    wind_speed.innerHTML = `${weather_data.wind.speed}Km/H`;


    switch(weather_data.weather[0].main){
        case 'Clouds':
            weather_img.src = "/cloud.png";
            break;
        case 'Clear':
            weather_img.src = "/clear.png";
            break;
        case 'Rain':
            weather_img.src = "/rain.png";
            break;
        case 'Mist':
            weather_img.src = "/mist.png";
            break;
        case 'Snow':
            weather_img.src = "/snow.png";
            break;

    }
  
    console.log(weather_data);
}


searchBtn.addEventListener('click', ()=>{ //arrow function
    checkWeather(inputBox.value);
});


//changes


function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

function filterFunction() {
  var input, filter, ul, li, a, i;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  div = document.getElementById("myDropdown");
  a = div.getElementsByTagName("a");
  for (i = 0; i < a.length; i++) {
    txtValue = a[i].textContent || a[i].innerText;
    if (txtValue.toUpperCase().indexOf(filter) > -1) {
      a[i].style.display = "";
    } else {
      a[i].style.display = "none";
    }
  }
}
const cityInput = document.getElementById('cityInput');
        const cityDropdown = document.getElementById('cityDropdown');

        // List of sample cities (you can replace this with actual data)
        const cities = ['New York', 'Los Angeles', 'London', 'Paris', 'Tokyo', 'Sydney'];

        // Populate the dropdown with city names
        cities.forEach(city => {
            const cityLink = document.createElement('a');
            cityLink.textContent = city;
            cityLink.addEventListener('click', () => {
                checkWeather(city); // Fetch weather for selected city
                cityInput.value = city; // Set input value to selected city
                cityDropdown.style.display = 'none'; // Hide dropdown
            });
            cityDropdown.appendChild(cityLink);
        });

        // Display dropdown on input focus
        cityInput.addEventListener('focus', () => {
            cityDropdown.style.display = 'block';
        });

        // Hide dropdown on input blur
        cityInput.addEventListener('blur', () => {
            setTimeout(() => {
                cityDropdown.style.display = 'none';
            }, 200); // Delay the hiding to allow clicking on dropdown items
        });

        // Filter city names as user types
        cityInput.addEventListener('input', () => {
            const filterValue = cityInput.value.toLowerCase();
            const cityLinks = cityDropdown.getElementsByTagName('a');
            for (let i = 0; i < cityLinks.length; i++) {
                const cityName = cityLinks[i].textContent;
                if (cityName.toLowerCase().indexOf(filterValue) > -1) {
                    cityLinks[i].style.display = 'block';
                } else {
                    cityLinks[i].style.display = 'none';
                }
            }
        });

      

 




</script>
    </script>
    <script src="https://kit.fontawesome.com/595a890311.js" crossorigin="anonymous"></script>

    <!--changesss-->
   <!--<div class="dropdown">
        <button onclick="myFunction()" class="dropbtn">Dropdown</button>-
         <div id="myDropdown" class="dropdown-content">
           <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
           <a href="#about">About</a>
           <a href="#base">Base</a>
           <a href="#blog">Blog</a>
           <a href="#contact">Contact</a>
           <a href="#custom">Custom</a>
           <a href="#support">Support</a>
           <a href="#tools">Tools</a>
         </div>
       </div>
    -->
</body>
</html> 